jQuery(document).ready(function(a){function b(b){var c=a.trim(b.val());if(a("#fvp_help_notice").slideDown("fast"),(0===c.length||c==fvp_backend_data.default_value)&&(a("#fvp_video").removeClass("fvp_invalid"),a("#fvp_localvideo_format_warning").slideUp("fast")),c.match(fvp_backend_data.wp_upload_dir.replace(/\//g,"\\/"))){var d=/^.*\/(.*)\.(.*)/g,e=d.exec(c);"webm"==e[2]||"mp4"==e[2]||"ogg"==e[2]||"ogv"==e[2]?(a("#fvp_video").removeClass("fvp_invalid"),a("#fvp_localvideo_format_warning").slideUp("fast")):(a("#fvp_video").addClass("fvp_invalid"),a("#fvp_localvideo_format_warning").slideDown("fast","linear"))}else a("#fvp_video").removeClass("fvp_invalid"),a("#fvp_localvideo_format_warning").slideUp("fast")}a("#fvp_video").blur(function(){t=a(this),t.val(a.trim(t.val())),value=t.val(),(0===value.length||value==fvp_backend_data.default_value)&&(t.addClass("defaultTextActive"),t.val(fvp_backend_data.default_value)),t.trigger("autosize"),t.val()!=t.siblings(".fvp_mirror").val()&&(bg=t.siblings(".fvp_video_choose").children(".fvp_media_icon").css("backgroundImage"),t.siblings(".fvp_video_choose").children(".fvp_media_icon").css("backgroundImage","url('"+fvp_backend_data.loading_gif+"')"),a("#fvp_current_video").css({backgroundImage:"url('"+fvp_backend_data.loading_gif+"')",width:"256px"}).animate({height:"144px"}).children().animate({opacity:0}),a.post(ajaxurl,{action:"fvp_ajax",id:a("#post_ID").val(),fvp_nonce:a("#fvp_nonce").val(),fvp_video:a("#fvp_video").val()},function(b){t.siblings(".fvp_mirror").val(t.val()),t.siblings(".fvp_video_choose").children(".fvp_media_icon").css("backgroundImage",bg),"removed"==b.typ?(a("#fvp_current_video").css({backgroundImage:""}).animate({height:"0px"}),""!=b.img&&a("#postimagediv .inside").html(b.img)):(a("#fvp_current_video").html(b.video).animate({height:"144px"}),a("#fvp_help_notice").slideUp("fast"),b.valid?(a("#postimagediv .inside").html(b.img),a("#fvp_set_featimg_link, #fvp_featimg_warning").slideUp().addClass("fvp_hidden"),t.css("backgroundColor","#00FF00").animate({backgroundColor:"white"},500,function(){t.css("backgroundColor","")}),"local"==b.prov&&fvp_backend_data.videojs&&(vjs=videojs("videojs"+b.id,{},function(){}))):t.addClass("fvp_invalid"))},"json"))}),a(".fvp_input").focus(function(){value=a(this).val(),value==fvp_backend_data.default_value&&(a(this).removeClass("defaultTextActive"),a(this).val(""))}),a(".fvp_input").autosize().trigger("blur").keypress(function(a){13==a.keyCode&&a.preventDefault()}),a(".fvp_input").click(function(){a(this).select()}),a("#fvp_video").bind("change paste keyup",function(){setTimeout(b(a(this)),200)}),a("#fvp_set_featimg_link").removeClass("fvp_hidden"),a("#fvp_set_featimg_input").addClass("fvp_hidden"),a("#fvp_set_featimg_link, #fvp_warning_set_featimg").click(function(){return a("#fvp_set_featimg").attr("checked",!0),a.post(ajaxurl,{action:"fvp_ajax",id:a("#post_ID").val(),fvp_nonce:a("#fvp_nonce").val(),fvp_video:a("#fvp_video").val()},function(b){a("#postimagediv .inside").html(b.img),a("#fvp_set_featimg_link, #fvp_featimg_warning").slideUp().addClass("fvp_hidden")},"json"),!1}),a("#remove-post-thumbnail").click(function(){a("#fvp_set_featimg_link, #fvp_featimg_warning").slideDown().removeClass("fvp_hidden")}),a("#set-post-thumbnail").click(function(){a("#fvp_featimg_box_warning").addClass("fvp_hidden")}),a("#fvp_help_toggle").bind("click",function(){a("#contextual-help-link").trigger("click")});var c,e;e={frame:function(){return this._frame?this._frame:(this._frame=wp.media({title:c.data("title"),library:{type:"video"},button:{text:c.data("button")},multiple:!1}),this._frame.on("open",this.updateFrame).state("library").on("select",this.select),this._frame)},select:function(){var b=this.get("selection"),d="url";a(c.data("target")).val(b.pluck(d)).trigger("autosize").change().removeClass("defaultTextActive"),a("#fvp_video").blur()},updateFrame:function(){},init:function(){a("#wpbody").on("click",".fvp_video_choose",function(b){b.preventDefault(),c=a(this).closest(".fvp_input_wrapper"),e.frame().open()})}},1==fvp_backend_data.wp_35&&e.init()});